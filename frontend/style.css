:root{
  --bg:#f7f9fb;
  --panel:#ffffff;
  --accent:#0984e3;
}
*{box-sizing:border-box;font-family:Inter, system-ui, Arial, sans-serif}
body{margin:0;background:var(--bg);color:#2d3436}
header{padding:12px 20px;background:linear-gradient(90deg,#ffffff,#f1f3f5);border-bottom:1px solid #e6e6e6}
header h1{margin:0;font-size:1.1rem}
main{display:flex;gap:12px;padding:18px}
#map-area{flex:1;background:var(--panel);padding:12px;border-radius:8px;box-shadow:0 4px 8px rgba(10,10,10,0.04)}
#map{width:100%;height:420px}
.territory{cursor:pointer;transition:fill .15s,stroke .15s}
.territory:hover{fill:#b2bec3}
.territory.invaded{stroke:#d63031;stroke-width:3}
.territory.hovered{fill:#ffeaa7;stroke:#0984e3;stroke-width:2}
.territory.pulse{animation:pulse 1.25s ease-in-out infinite}
.label{font-size:14px;fill:#2d3436}
#panel{width:320px;background:var(--panel);padding:16px;border-radius:8px;box-shadow:0 4px 8px rgba(10,10,10,0.04)}
#panel h2{margin:0 0 8px}
#actions{margin-top:12px;display:flex;flex-direction:column;gap:8px}
#actions button{padding:8px;border-radius:6px;border:1px solid #dfe6e9;background:white;cursor:pointer}
#actions button:hover{background:var(--bg)}
#log{margin-top:12px;height:140px;overflow:auto;padding:8px;border-radius:6px;background:#fbfbfb;border:1px solid #f1f3f5;font-size:13px}
footer{padding:8px 18px;color:#636e72}

/* Tooltip */
#map-container{position:relative}
#tooltip{position:absolute;pointer-events:none;display:none;z-index:30;transform:translate(-50%, -110%);background:rgba(255,255,255,0.98);border-radius:6px;padding:8px 10px;border:1px solid rgba(0,0,0,0.08);box-shadow:0 8px 20px rgba(0,0,0,0.08);font-size:13px;min-width:160px}
#tooltip .title{font-weight:600;margin-bottom:6px}
#tooltip .row{display:flex;justify-content:space-between;color:#2d3436}

/* Legend */
#legend{position:relative;margin-top:10px;padding:10px;border-radius:8px;background:#ffffff;border:1px solid #ececec;box-shadow:0 4px 8px rgba(0,0,0,0.03);font-size:13px}
#legend-title{font-weight:700;margin-bottom:8px}
.legend-row{display:flex;gap:8px;align-items:center;padding:4px 0}
.swatch{width:18px;height:12px;border-radius:3px;display:inline-block;margin-right:6px}
.swatch.head{background:#0984e3}
.swatch.regional{background:#00b894}
.swatch.client{background:#fdcb6e}
.swatch.invaded{background:#d63031}
.legend-controls{display:flex;gap:6px;margin-top:8px}
.legend-controls button{padding:6px;border-radius:6px;border:1px solid #e6e6e6;background:white;cursor:pointer}

@keyframes pulse{
  0%{filter:drop-shadow(0 0 0 rgba(0,0,0,0));transform:scale(1)}
  50%{filter:drop-shadow(0 6px 18px rgba(0,136,255,0.18));transform:scale(1.03)}
  100%{filter:drop-shadow(0 0 0 rgba(0,0,0,0));transform:scale(1)}
}

/* Turn manager */
#turn-manager{margin-top:12px}
#turn-status{font-size:13px;color:#2d3436;margin-bottom:6px}
.player-row{display:flex;gap:8px;align-items:center;padding:6px;border-radius:6px;border:1px solid #f1f3f5;margin-bottom:6px}
.player-row .name{flex:1;font-weight:600}
.player-row select, .player-row button{padding:6px;border-radius:6px;border:1px solid #e6e6e6;background:white}
.locked{opacity:0.6}
